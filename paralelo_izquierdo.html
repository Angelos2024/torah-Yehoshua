<!DOCTYPE html>
<html>
<head>
  <title>Buscador de Versículos Bíblicos</title>
  <style>
    /* Estilo general */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      background-color: #f9f9f9;
      color: #333;
      line-height: 1.6;
    }
    .tooltip {
  position: relative;
  display: inline-block;
  cursor: pointer;
  margin-top: -20px;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 70px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  top: 40px; /* Ajusta según cada tooltip */
  left: -70px;
  transform: translateX(-50%);
}




/* Tooltip específico para paralelo */
.paralelo-tooltip .tooltiptext {
  visibility: hidden;
  width: 70px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  transform: translateX(-50%);
  left: -180px;
  top: 0px;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}

/* Específico para el tooltip de copiar */
.copiar-tooltip img {
  top: -25px;
  left: -100px;
  width: 30px;
  transition: transform 0.3s ease;
}

.copiar-tooltip img:hover {
  transform: scale(1.2);
}

/* Específico para el tooltip de paralelo */
.paralelo-tooltip img {
  top: -25px;
  left: -190px;
  width: 30px;
  transition: transform 0.3s ease;
}

.paralelo-tooltip img:hover {
  transform: scale(1.2);
}

/* Estilo del nuevo sidebar (lado izquierdo) */
/* Sidebar del lado izquierdo (con empuje del contenido central) */
#paraleloSidebar {
  width: 0; /* Ancho inicial cerrado */
  position: absolute;
  z-index: 2; /* Más alto para que quede encima del contenido */
  top: 115px; /* Ajusta según tu diseño */
  left: 0; /* Se desliza desde la izquierda */
  background-color: #111;
  overflow-x: hidden;
  overflow-y: auto; /* Scroll vertical si es necesario */
  transition: width 0.4s ease; /* Animación suave */
  padding-top: 20px; /* Espaciado interno */
  color: white;
}

#paraleloSidebar.open {
  width: 24%; /* Ancho del sidebar al abrirse */
  height: 600px; /* Ajusta según tu diseño */
  top: 140px;
}

/* Links dentro del sidebar */
#paraleloSidebar a {
  padding: 1px 15px;
  text-decoration: none;
  font-size: 15px;
  color: white;
  display: block;
  transition: 0.3s;
}

#paraleloSidebar a:hover {
  background-color: #575757;
}

    /* Sidebar del lado izquierdo */
    #paraleloSidebar {
      width: 0;
      position: absolute;
      z-index: 2;
      top: 115px;
      left: 0;
      background-color: #111;
      overflow-x: hidden;
      overflow-y: auto;
      transition: width 0.4s ease;
      padding-top: 20px;
      color: white;
    }

    #paraleloSidebar.open {
      width: 24%;
      height: 600px;
      top: 140px;
    }

    #paraleloSidebar a {
      padding: 1px 15px;
      text-decoration: none;
      font-size: 15px;
      color: white;
      display: block;
      transition: 0.3s;
    }

    #paraleloSidebar a:hover {
      background-color: #575757;
    }

    #main {
      transition: margin-left 0.3s;
      padding: 20px;
    }

    #main.shifted-left {
      margin-left: 24%; /* Ajusta al ancho del sidebar */
    }

    /* Dropdowns */
    #versionDropdown, #bookDropdown, #chapterDropdown {
      margin-bottom: 15px;
    }

    select {
      padding: 5px;
      border: none;
      background-color: #333;
      color: white;
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
    }

    select:hover {
      background-color: #575757;
    }

    #chapterContent {
      margin-top: 20px;
      padding: 10px;
      background-color: #333;
      color: #ddd228;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div id="main">
    <!-- Tooltip para "paralelo" -->
    <div class="tooltip paralelo-tooltip">
      <img id="imgparalelo" src="https://i.imgur.com/xB2Fvor.png" 
           alt="Contenido paralelo" 
           onclick="toggleParaleloSidebar()" />
      <span class="tooltiptext">Paralelo</span>
    </div>

    <!-- Sidebar paralelo -->
   <!-- Sidebar paralelo -->
<div id="paraleloSidebar">
  <!-- Dropdown de versiones -->
  <div id="versionDropdown" class="dropdown">
  <label for="versionSelector" class="dropdown-label">Versión:</label>
  <select id="versionSelector" class="version-dropdown" onchange="cambiarVersion()">
    <option value="RVR1960">Reina-Valera 1960</option>
    <option value="Americas">Las Américas</option>
    <option value="Jubileos">Biblia Jubileos</option>
  </select>
</div>

<div id="bookDropdown" class="dropdown">
  <label for="bookSelector" class="dropdown-label">Libro:</label>
  <select id="bookSelector" class="book-dropdown" onchange="cargarCapitulos()">
    <option value="">Selecciona un libro</option>
  </select>
</div>

<div id="chapterDropdown" class="dropdown">
  <label for="chapterSelector" class="dropdown-label">Capítulo:</label>
  <select id="chapterSelector" class="chapter-dropdown" onchange="mostrarCapitulo()">
    <option value="">Selecciona un capítulo</option>
  </select>
</div>

 

  <!-- Contenedor para contenido de capítulos -->
  <div id="chapterContentSidebar" style="margin-top: 10px; color: white; padding: 10px; overflow-y: auto; max-height: 450px;"></div>
</div>


    <!-- Resultados generales -->
    <ul id="results"></ul>
  </div>

  <script>
  // Definimos los libros disponibles para la versión RVR1960
  const versionesBiblia = {
    RVR1960: {
      "1 Corintios": "https://raw.githubusercontent.com/xtiam57/church-utils/refs/heads/main/dist/biblia/1_corintios.json",
      "Apocalipsis": "https://raw.githubusercontent.com/xtiam57/church-utils/refs/heads/main/dist/biblia/apocalipsis.json"
    },
    Americas: {},
    Jubileos: {}
  };

  let currentVersion = "RVR1960"; // Versión predeterminada
  let dataCache = {}; // Caché de datos cargados
  let currentBook = null; // Libro actual

  // Alternar el sidebar paralelo
  function toggleParaleloSidebar() {
    const paraleloSidebar = document.getElementById("paraleloSidebar");
    const main = document.getElementById("main");

    const isOpen = paraleloSidebar.classList.contains("open");

    if (isOpen) {
      paraleloSidebar.classList.remove("open");
      main.classList.remove("shifted-left");
    } else {
      paraleloSidebar.classList.add("open");
      main.classList.add("shifted-left");
      cargarLibros(versionesBiblia[currentVersion]); // Cargar libros al abrir el sidebar
    }
  }

  function closeParaleloSidebar() {
    const paraleloSidebar = document.getElementById("paraleloSidebar");
    const main = document.getElementById("main");

    paraleloSidebar.classList.remove("open");
    main.classList.remove("shifted-left");
  }

  // Cambiar versión y cargar libros
  function cambiarVersion() {
    currentVersion = document.getElementById("versionSelector").value;
    cargarLibros(versionesBiblia[currentVersion]); // Actualizar libros al cambiar versión
  }

  // Cargar los libros en el dropdown
  function cargarLibros(libros) {
    const bookSelector = document.getElementById("bookSelector");
    bookSelector.innerHTML = '<option value="">Seleccionar</option>'; // Limpiar libros previos

    for (const bookName in libros) {
      const option = document.createElement("option");
      option.value = bookName;
      option.textContent = bookName;
      bookSelector.appendChild(option);
    }

    // Limpiar capítulos y resultados al cambiar de libro
    document.getElementById("chapterSelector").innerHTML = '<option value="">Seleccionar</option>';
    document.getElementById("results").innerHTML = "";
  }

  // Cargar capítulos del libro seleccionado
  function cargarCapitulos() {
    const bookSelector = document.getElementById("bookSelector");
    const bookName = bookSelector.value;

    if (!bookName) return; // Salir si no hay libro seleccionado

    const url = versionesBiblia[currentVersion][bookName];
    const chapterSelector = document.getElementById("chapterSelector");
    chapterSelector.innerHTML = '<option value="">Seleccionar</option>'; // Limpiar capítulos previos

    fetch(url)
      .then((response) => {
        if (!response.ok) {
          throw new Error(`Error al cargar contenido: ${response.status}`);
        }
        return response.json();
      })
      .then((data) => {
        dataCache = data; // Guardar datos en caché para usar en capítulos y versículos

        data.forEach((_, idx) => {
          const option = document.createElement("option");
          option.value = idx + 1;
          option.textContent = `Capítulo ${idx + 1}`;
          chapterSelector.appendChild(option);
        });
      })
      .catch((error) => {
        chapterSelector.innerHTML = '<option value="">Error al cargar capítulos</option>';
        console.error(error);
      });
  }

  // Mostrar contenido del capítulo seleccionado
  // Mostrar contenido del capítulo seleccionado
function mostrarCapitulo() {
  const chapterSelector = document.getElementById("chapterSelector");
  const chapterContent = document.getElementById("chapterContentSidebar"); // Cambiado al contenedor dentro del sidebar
  const chapterIndex = parseInt(chapterSelector.value, 10) - 1;

  if (!dataCache || !dataCache[chapterIndex]) {
    chapterContent.innerHTML = "<p>Error al cargar el capítulo.</p>";
    return;
  }

  // Mostrar los versículos del capítulo dentro del sidebar
  const chapterData = dataCache[chapterIndex];
  chapterContent.innerHTML = chapterData
    .map((verso, idx) => `<p><b>${chapterIndex + 1}:${idx + 1}</b> - ${verso}</p>`)
    .join("");
}

</script>

</body>
</html>
