<!DOCTYPE html>
<html>
<head>
  <title>Buscador de Versículos Bíblicos</title>
  <head>
  
 <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <link rel="stylesheet" href="css/estiloparalelo.css">
</head>
<body>

    <style>
      /* Estilo general */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        max-width: 600px;
        margin: auto;
        background-color: #f9f9f9;
        color: #333;
        line-height: 1.6;
      }
      h1 {
        text-align: center;
        color: #4CAF50;
      }    /* no lo estoy usando pero es para titulos, color y centrado */
      
       .search-container {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
          margin-left: -60px;
      }
      input[type="text"] {
        flex: 1;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
      }
      button {
        padding: 8px 12px;
        border: 1px solid #ccc;
        border-radius: 4px;
        background-color: #000000;
        color: white;
        font-size: 14px;
        cursor: pointer;
      }
      button:hover {
        background-color: #5d5f5d;
      }
      ul {
      list-style-type: none;
      padding: 0;
      margin-top; -23px;
      }
       li {
       padding: 15px;
    border: 1px solid #ccc;
    margin-bottom: -13px;
    border-radius: 4px;
    background-color: #fff;
    width: calc(100% + 80px);
    margin-left: -90px;
    margin-top: 20px

    }
      /* Sidebar */
   #mySidebar {
    width: 0; /* Ancho inicial */
    position: absolute;
    z-index: 1;
    top: 115px; /* Espacio desde la parte superior */
    right: 0; /* Posición en la derecha */
    background-color: #111;
    overflow-x: hidden;
    overflow-y: auto; /* Añade scroll vertical si el contenido es mayor que la ventana */
    transition: width 0.4s;
    padding-top: 20px; /* Espaciado interno desde el contenido superior */
    color: white;
  }
  #mySidebar.open {
    width: 32%;
    height: 600px;
    margin-top: 25px;
  top: 115px;
  }
      #mySidebar a {
        padding: 10px 15px;
        text-decoration: none;
        font-size: 18px;
        color: white;
        display: block;
        transition: 0.3s;
      }
      #mySidebar a:hover {
        background-color: #575757;
      }
      #main {
        transition: margin-right 0.3s;
        padding: 2px;
      }
      #main.shifted {
    margin-right: 10%; /* Igual al ancho del sidebar izquierdo */
  transition: margin-right 0.4s ease; /* Animación suave */
}
   
      /* Estilos específicos para el menú desplegable */
      .dropdown-label {
       margin-bottom: 5px; /* Espacio entre el label y el select */
  font-size: 14px; /* Ajusta el tamaño del texto si es necesario */
      }


      .dropdown-content {
        display: none; /* Inicialmente oculto */
        position: absolute;
        background-color: #f1f1f1;
        min-width: 190px;
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
        z-index: 1;
      }
      .dropdown-content a {
        color: #800000;
        background-color: #ffffff;
        padding: 8px 10px;
        text-decoration: none;
        display: block;
      }
      .dropdown-content a:hover {
        color: #ffffff;
        background-color: #333333;
      }
      #welcomeMessage {
  text-align: center;
  margin: 1px -10px;
  color: #4CAF50;
  background-color: #f0f0f0;
  padding: 15px;
  border-radius: 8px;
  margin-left: -100px;
}
#menuSidebar {
  display: flex;
  flex-direction: row;
  gap: 10px;
  margin-bottom: 20px;
}
#menuSidebar button {
  padding: 10px;
  border: none;
  background-color: #333;
  color: white;
  font-size: 16px;
  cursor: pointer;  /* Muestra que es clickeable */
  border-radius: 4px;
}
#menuSidebar button:hover {
  background-color: #575757;
  transform: scale(1.05); /* Amplía la imagen ligeramente al pasar el mouse */
}
.seccionSidebar {
  display: none; /* Oculta todas las secciones por defecto */
  color: white;
  padding: 10px;
  background-color: #222;
  border-radius: 4px;
}
#imgcopiar {
position: absolute;
  top: -45px; /* Ajusta la distancia desde el contenedor superior */
  left: -120px; /* Ajusta la distancia desde el contenedor izquierdo */
  width: 30px; /* Tamaño de la imagen */
  cursor: pointer; /* Muestra que es clickeable */
  margin-top: 10px;
  transition: transform 0.3s ease; /* Animación al pasar el mouse */
}
#imgcopiar:hover {
  transform: scale(1.2); /* Amplía la imagen ligeramente al pasar el mouse */
}
#imgparalelo:hover {
  transform: scale(1.2); /* Amplía la imagen ligeramente al pasar el mouse */
}
#imgparalelo {
  position: absolute;
  top: -45px; /* Ajusta la distancia desde el contenedor superior */
  left: -190px; /* Ajusta la distancia desde el contenedor izquierdo */
  width: 30px; /* Tamaño de la imagen */
  cursor: pointer; /* Muestra que es clickeable */
  margin-top: 10px;
  transition: transform 0.3s ease; /* Animación al pasar el mouse */
}
 
    
#imgmaterial {
  position: absolute;
  top: -45px; /* Ajusta la distancia desde el contenedor superior */
  left: 590px; /* Ajusta la distancia desde el contenedor izquierdo */
  width: 30px; /* Tamaño de la imagen */
  cursor: pointer; /* Muestra que es clickeable */
  margin-top: 10px;
  transition: transform 0.3s ease; /* Animación al pasar el mouse */
}
#imgmaterial:hover {
  transform: scale(1.2); /* Amplía la imagen ligeramente al pasar el mouse */
}
 .tooltip {
  position: relative;
  display: inline-block;
  cursor: pointer;
  margin-top: -20px;
}
.tooltip .tooltiptext {
  visibility: hidden;
  width: 70px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  left: -175px;
  transform: translateX(-50%);
}
/* General tooltip */
.material-tooltip .tooltiptext {
  visibility: hidden;
  width: 70px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  transform: translateX(-50%);
  left:600px;
  top: 0px;
}
.material-tooltip img {
  margin-top: -2px;
  width: 30px;
  transition: transform 0.3s ease;
}
/* Tooltip específico para copiar */
.copiar-tooltip .tooltiptext {
  visibility: hidden;
  width: 70px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  transform: translateX(-50%);
  left:-100px;
  top: 0px;
}
/* Específico para el tooltip de copiar */
.copiar-tooltip img {
  top: -25px;
  left: -100px;
  width: 30px;
  transition: transform 0.3s ease;
}
.copiar-tooltip img:hover {
  transform: scale(1.2);
}
/* Ajuste del contenido principal cuando el sidebar está abierto */
#main.shifted-left {
  margin-left: 10%; /* Ajusta al ancho de tu sidebar */
  transition: margin-left 0.4s ease; /* Animación suave */
}
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.8);
}
.modal-content {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 700px;
}
.close {
  position: absolute;
  top: 20px;
  right: 35px;
  color: #fff;
  font-size: 40px;
  font-weight: bold;
  cursor: pointer;
}
.close:hover,
.close:focus {
  color: #bbb;
  text-decoration: none;
  cursor: pointer;
}
    /* Botones de capítulo */
    #chapterButtons, #bookButtons {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }
    .chapter-button, .book-button {
 
    padding: 10px;
    border: none;
    background-color: #333;
    color: white;
    font-size: 16px;
    cursor: pointer;
    border-radius: 1px;
    }
    .chapter-button:hover, .book-button:hover {
      background-color: #0056b3;
    }
    /* Contenedor flexible para los selectores */
    /* Contenedor flexible para los selectores */
  #myDIV {
    position:absolute;
  margin-top: 100px;
  padding:10px;
  right: 0px;
  display: none; /* Oculto por defecto */
  }
      .highlight {
      background-color: yellow;
      font-weight: bold;
    }
    .nested {
      display: none;
      padding-left: 100px;
    }
    .expandable {
      cursor: pointer;
    }
    .full-chapter-link {
      display: block;
      margin-top: 10px;
      font-size: 14px;
      text-decoration: underline;
      color: #4CAF50;
      cursor: pointer;
    }
    #prevPage{

font-display: left;

    }


    </style>

  </head>
  <body>


    <!-- codigo nuevo buscador-->
<div style="display: flex; " >

  <div id="myDIV"  style="flex-shrink: 0; width: 250px;">
    <h3>Resultados</h3>

    <ul id="countResults" style="margin-top:-23px ;"></ul>

  </div>
  </div>
      <div class="search-container">
        <input
          type="text"
          id="searchInput"
          placeholder="Escribe Libro Capítulo:Versículo (ej. Gálatas 1:1)"
        />
        <button id="searchButton">Buscar</button>
      </div>

  <div style="position: relative; display: flex;">

  <!-- Botón de Página Anterior -->
  <button id="prevPage" 
          style="position: absolute; 
                 left: 200px; /* Muy a la izquierda */
                 top: 13%; /* Ajusta la altura según necesites */
                 transform: translateY(-15%); /* Centrar verticalmente */
                 display: none; 
                 padding: 8px 20px; 
                 width: 150px;">
    Página Anterior
  </button>

  <!-- Botón de Página Siguiente -->
  <button id="nextPage" 
          style="position: absolute; 
                 right: 35px; /* Muy a la derecha */
                 top: 13%; /* Ajusta la altura según necesites */
                 transform: translateY(-15%); /* Centrar verticalmente */
                 display: none; 
                 padding: 8px 20px; 
                 width: 150px;">
    Página Siguiente
  </button>
  
</div>
  <!-- lista de libros disponibles--> 
<div class="dropdown-label" id="dropdownButton" style="      display: inline-block;
        font-size: 16px;
        font-weight: bold;
        color: #800000;
        cursor: pointer;
        position: relative;
        margin-left: -60px; /* Desplaza hacia la izquierda */">
        Bible Book List
        <div class="dropdown-content" id="dropdownMenu">
          <a href="#">Según Marcos</a>
          <a href="#">Carta a los Romanos</a>
          <a href="#"data-libro="Gálatas">Carta a los Gálatas</a>
          <a href="#" data-libro="1Tesalonicenses">1 Tesalonicenses</a>
          <a href="#">2 Tesalonicenses</a>
          <a href="#"data-libro="Hebreos">Carta a los Hebreos</a>
          <a href="#">Revelación Apocalipsis</a>
        </div>
      </div>

      <div id="main">
      <!-- iconos debajo del buscador-->


      <div class="tooltip copiar-tooltip">
  <img id="imgcopiar" src="https://i.imgur.com/YaVe5C3.png" 
       alt="Copiar contenido" 
       onclick="copiarContenido()" />
  <span class="tooltiptext">Copiar</span>
</div>
 <div class="tooltip material-tooltip">
<img id="imgmaterial" src="https://i.imgur.com/oJRwGnT.png" alt="Menú" onclick="toggleSidebar()">
<span class="tooltiptext">aparato crítico</span>
</div>

 <!-- Tooltip para "paralelo" -->
    <div class="tooltip paralelo-tooltip">
      <img id="imgparalelo" src="https://i.imgur.com/xB2Fvor.png" 
          alt="Contenido paralelo" 
           onclick="toggleParaleloSidebar()" />
      <span class="tooltiptext">Paralelo</span>
    </div>

   <!-- Sidebar paralelo -->
   <div id="paraleloSidebar">
 <div class="dropdown-container">
  <!-- Dropdown de versiones -->
  <div id="versionDropdown" class="dropdown">
  <label for="versionSelector" class="dropdown-label">Versión:</label>
  <select id="versionSelector" class="version-dropdown" onchange="cambiarVersion()">
    <option value="RVR1960">Reina-Valera 1960</option>
    <option value="Americas">Las Américas</option>
    <option value="Jubileos">Biblia Jubileos</option>

  </select>
</div>

<div id="bookDropdown" class="dropdown">
  <label for="bookSelector" class="dropdown-label">Libro:</label>
  <select id="bookSelector" class="book-dropdown" onchange="cargarCapitulos()">
    <option value="">Selecciona un libro</option>
  </select>
</div>

<div id="chapterDropdown" class="dropdown">
  <label for="chapterSelector" class="dropdown-label">Capítulo:</label>
  <select id="chapterSelector" class="chapter-dropdown" onchange="mostrarCapitulo()">
    <option value="">Selecciona un capítulo</option>
  </select>
</div>
 </div>
  <!-- Contenedor para contenido de capítulos -->
  <div id="chapterContentSidebar" style="margin-top: 3px; color: white; padding: 10px; overflow-y: auto; max-height: 450px;"></div>
</div>

<!-- el menu desplegable de comentarios-->
  
    <!-- Sidebar -->
    <div id="mySidebar">
   
  <div id="menuSidebar">
    <button onclick="mostrarSeccion('comentarios')">Comentarios de Eric de Jesús Rodríguez Mendoza</button>
    <button onclick="mostrarSeccion('critico')">Aparato Crítico NA28</button>


    <button onclick="mostrarSeccion('mapas')">Mapas</button>
  </div>
  <div id="contenidoSidebar">
    <!-- Contenedor para los comentarios -->
    <div id="comentarios" class="seccionSidebar">
      <p><a href="#" onclick="cargarComentarios()">Comentarios Gálatas 1</a> 
  <div id="contenidoComentarios" style="margin-top: 10px; color: white; padding: 10px;"></div></p>
    </div>
    <div id="critico" class="seccionSidebar" style="display: none;">
      <p>Contenido del Aparato Crítico NA28</p>
    </div>
    <div id="mapas" class="seccionSidebar" style="display: none;">
 <p>
    <a href="#" onclick="abrirModal('https://i.imgur.com/kYBZVlB.jpeg')">Mapa de los pueblos</a>
  </p>
  <p>
    <a href="#" onclick="abrirModal('https://i.imgur.com/zLScQV2.png')">Mapa del éxodo</a>
  </p>
  <p>
    <a href="#" onclick="abrirModal('https://i.imgur.com/5w9LMZx.png')">Tribus de Israel (tiempo de los reyes)</a>
  </p>
  <p>
    <a href="#" onclick="abrirModal('https://i.imgur.com/5w9LMZx.png')">Tierra de Israel en el Primer siglo</a>
  </p>
  <p>
    <a href="#" onclick="abrirModal('https://i.imgur.com/95ex03o.png')">Viajes de Saul (Pablo)</a>
  </p>
  <p>
    <a href="#" onclick="abrirModal('https://i.imgur.com/BiTNN4L.png')">Lugares donde Yehoshúa' vivió y enseñó</a>
  </p>
 
</div>
    <div id="modal" class="modal">
  <span class="close" onclick="cerrarModal()">&times;</span>
  <img id="modalImg" class="modal-content" alt="Mapa de los pueblos">
  <div id="caption"></div>
</div>
  </div>
</div>
<!-- mensaje de bievenida-->
<div id="welcomeMessage">
  <h2>¡Bienvenido al Buscador de Versículos Bíblicos!</h2>
  <p>Escribe el libro, capítulo y versículo que deseas buscar.</p>
</div>



<!-- el id de resultados generales-->
<ul id="results" style="margin-top: -23px;"></ul>








<script>

  let currentBook = null;
let currentChapter = null;

  // Función para mostrar el primer capítulo de un libro
async function showFirstChapter(libro) {
    currentBook = libro; // Actualizar el libro actual
    const datos = await fetchAllJsonData();
    if (!datos || !datos[libro]) {
        resultsContainer.innerHTML = "<li>Libro no encontrado.</li>";
        return;
    }

    const capitulos = datos[libro];
    const primerCapitulo = Object.keys(capitulos)[0]; // Obtener el primer capítulo
    currentChapter = primerCapitulo; // Actualizar el capítulo actual
    const versos = capitulos[primerCapitulo];

    // Limpiar resultados y mostrar los versos del primer capítulo
    resultsContainer.innerHTML = ""; // Elimina cualquier encabezado
    Object.entries(versos).forEach(([versiculo, texto]) => {
        resultsContainer.innerHTML += `<li>${libro} ${primerCapitulo}:${versiculo} - ${texto}</li>`;
    });

    // Actualizar navegación
    showFullChapter(libro, primerCapitulo);

    // Ocultar mensaje de bienvenida y mostrar resultados
    hideWelcomeMessage();
    sidebar.style.display = "block";
}



// Añadir evento a cada opción del menú desplegable
document.querySelectorAll("#dropdownMenu a").forEach(item => {
  item.addEventListener("click", event => {
    event.preventDefault();
    const libro = item.getAttribute("data-libro"); // Obtener el libro seleccionado
    if (libro) {
      showFirstChapter(libro);
    }
  });
});

   
 const prevPageButton = document.getElementById("prevPage");
  const nextPageButton = document.getElementById("nextPage");

  async function showFullChapter(libro, capitulo) {
    currentBook = libro; // Actualizar el libro actual
    currentChapter = capitulo; // Actualizar el capítulo actual
    const datos = await fetchAllJsonData();
    if (!datos[libro] || !datos[libro][capitulo]) return;

    resultsContainer.innerHTML = "";

    Object.entries(datos[libro][capitulo]).forEach(([numVerso, texto]) => {
        resultsContainer.innerHTML += `<li>${libro} ${capitulo}:${numVerso} - ${texto}</li>`;
    });

    // Determinar capítulos anterior y siguiente
    const chapterNumbers = Object.keys(datos[libro]).map(Number).sort((a, b) => a - b);
    const currentChapterIndex = chapterNumbers.indexOf(parseInt(capitulo));

    const prevChapter = chapterNumbers[currentChapterIndex - 1];
    const nextChapter = chapterNumbers[currentChapterIndex + 1];

    // Mostrar u ocultar botones según disponibilidad
    if (prevChapter) {
        prevPageButton.style.display = "inline-block";
        prevPageButton.onclick = () => showFullChapter(libro, prevChapter);
    } else {
        prevPageButton.style.display = "none";
    }

    if (nextChapter) {
        nextPageButton.style.display = "inline-block";
        nextPageButton.onclick = () => showFullChapter(libro, nextChapter);
    } else {
        nextPageButton.style.display = "none";
    }
}

  
  function cargarComentarios() {
    const url = "https://raw.githubusercontent.com/Angelos2024/torah-Yehoshua/refs/heads/main/comentarios_codigos/galatas/galatas1.html"; // Enlace RAW de galatas
    const contenedor = document.getElementById("contenidoComentarios");
    // Limpia el contenido antes de cargar nuevo
    contenedor.innerHTML = "Cargando comentarios...";
    fetch(url)
      .then(response => {
        if (!response.ok) {
          throw new Error(`Error al cargar el archivo: ${response.status}`);
        }
        return response.text();
      })
      .then(data => {
        contenedor.innerHTML = data; // Inserta el contenido del archivo HTML
      })
      .catch(error => {
        contenedor.innerHTML = `<p>Error al cargar los comentarios: ${error.message}</p>`;
      });
  }
  
</script>

    <script>
      // Funciones del sidebar
function toggleSidebar() {
  const sidebar = document.getElementById("mySidebar");
  const main = document.getElementById("main");
  const toggleNav = document.getElementById("toggleNav");
  const isOpen = sidebar.classList.contains("open");
  if (isOpen) {
    sidebar.classList.remove("open");
    main.classList.remove("shifted");
    toggleNav.src = "https://i.imgur.com/oJRwGnT.png"; // Ícono de menú
  } else {
    sidebar.classList.add("open");
    main.classList.add("shifted");
    toggleNav.src = "https://i.imgur.com/oJRwGnT.png"; // Sustituye por un enlace válido de tu imagen de cierre
  }
}
  
  // JSON y búsqueda
  const urls = [
    "https://raw.githubusercontent.com/Angelos2024/torah-Yehoshua/main/galatas.json",
    "https://raw.githubusercontent.com/Angelos2024/torah-Yehoshua/main/Hebreos.json",
    "https://raw.githubusercontent.com/Angelos2024/torah-Yehoshua/main/1_Tesalonicenses.json"
  ];
  const searchInput = document.getElementById("searchInput");
  const searchButton = document.getElementById("searchButton");
  const resultsContainer = document.getElementById("results");
  const countResultsContainer = document.getElementById("countResults");
  const sidebar = document.getElementById("myDIV");

  const dropdownButton = document.getElementById("dropdownButton");
  const dropdownMenu = document.getElementById("dropdownMenu");

  // Función para cargar datos JSON
  async function fetchJsonData(url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Error al cargar JSON: ${response.status}`);
      return await response.json();
    } catch (error) {
      console.error(`Error:`, error);
      return null;
    }
  }

 async function fetchJsonData(url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Error al cargar JSON: ${response.status}`);
      return await response.json();
    } catch (error) {
      console.error(`Error:`, error);
      return null;
    }
  }

  async function fetchAllJsonData() {
    const allData = {};
    for (const url of urls) {
      const data = await fetchJsonData(url);
      if (data) Object.assign(allData, data);
    }
    return allData;
  }

  // Función de búsqueda principal
// Modificar la función searchVerses para manejar búsquedas de capítulos completos
// Función de búsqueda principal
// Modificar la función searchVerses para manejar búsquedas de capítulos completos y versículos específicos
async function searchVerses(query) {
  const datos = await fetchAllJsonData();
  if (!datos) return;

  resultsContainer.innerHTML = "";
  countResultsContainer.innerHTML = "";
    prevPageButton.style.display = "none"; // Ocultar botón "Anterior"
  nextPageButton.style.display = "none"; // Ocultar botón "Siguiente"

  const normalizedQuery = query
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "")
    .toLowerCase();

  // Mapear abreviaturas a nombres completos
  const libroMap = {
    gal: "gálatas", Gal: "Gálatas",
    heb: "hebreos", Heb: "Hebreos",
    "1 tes": "1Tesalonicenses", "1tes": "1Tesalonicenses",
    "1 tesa": "1Tesalonicenses", "1Tesa": "1Tesalonicenses",
    "1 tesalonicenses": "1Tesalonicenses"
  };

  // Verificar si es una búsqueda de versículos específicos o capítulos completos
  const match = normalizedQuery.match(/^([\w\s]+)\s(\d+)(?::(\d+)(?:-(\d+))?)?$/);
  if (match) {
    let libro = match[1].trim();
    const capitulo = match[2];
    const versiculoInicio = match[3] ? parseInt(match[3], 10) : null;
    const versiculoFin = match[4] ? parseInt(match[4], 10) : null;

    libro = libroMap[libro] || libro;
    const libroEncontrado = Object.keys(datos).find(key => {
      return key
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .toLowerCase() === libro
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .toLowerCase();
    });

if (libroEncontrado) {
  const capitulos = datos[libroEncontrado];
  if (capitulos[capitulo]) {

    // Lógica de versículo o rango
    if (versiculoInicio && versiculoFin) {
      // Mostrar rango de versículos
      for (let i = versiculoInicio; i <= versiculoFin; i++) {
        const texto = capitulos[capitulo][i];
        resultsContainer.innerHTML += texto
          ? `<li>${libroEncontrado} ${capitulo}:${i} - ${texto}
              <a href="#" class="full-chapter-link" onclick="showFullChapter('${libroEncontrado}', '${capitulo}')">Leer capítulo completo</a>
             </li>`
          : `<li>${libroEncontrado} ${capitulo}:${i} - Versículo no encontrado.</li>`;
      }

      // Ocultar botones de navegación para búsquedas de rango de versículos
      prevPageButton.style.display = "none";
      nextPageButton.style.display = "none";
      return;
    } else if (versiculoInicio) {
      // Mostrar un versículo específico
      const texto = capitulos[capitulo][versiculoInicio];
      if (texto) {
        resultsContainer.innerHTML = `<li>${libroEncontrado} ${capitulo}:${versiculoInicio} - ${texto}
          <a href="#" class="full-chapter-link" onclick="showFullChapter('${libroEncontrado}', '${capitulo}', '${versiculoInicio}')">Leer capítulo completo</a>
        </li>`;
      } else {
        resultsContainer.innerHTML = `<li>${libroEncontrado} ${capitulo}:${versiculoInicio} - Versículo no encontrado.</li>`;
      }

      // Ocultar botones de navegación para búsquedas de un versículo
      prevPageButton.style.display = "none";
      nextPageButton.style.display = "none";
      return;
    } else {
      // Mostrar capítulo completo
      showFullChapter(libroEncontrado, capitulo);
      return;
    }
  } else {
    resultsContainer.innerHTML = "<li>Capítulo no encontrado.</li>";
    return;
  }
} else {
  resultsContainer.innerHTML = "<li>Libro no encontrado.</li>";
  return;
}

  }

  // Si no es búsqueda de versículo o capítulo, realizar búsqueda por palabras
  const resultados = [];
  const conteoPorLibro = {};
  const ubicacionesPorLibro = {};
  const palabraRegex = new RegExp(`(${query})`, "gi");

  Object.keys(datos).forEach(libro => {
    let libroCount = 0;
    ubicacionesPorLibro[libro] = [];
    Object.keys(datos[libro]).forEach(capitulo => {
      Object.entries(datos[libro][capitulo]).forEach(([versiculo, texto]) => {
        const textoNormalizado = texto
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "")
          .toLowerCase();
        if (textoNormalizado.includes(normalizedQuery)) {
          const textoResaltado = texto.replace(
            palabraRegex,
            "<span style='background-color: #333; color: white; font-weight: bold;'>$1</span>"
          );
          resultados.push(
            `<li>${libro} ${capitulo}:${versiculo} - ${textoResaltado}
              <span class="full-chapter-link" onclick="showFullChapter('${libro}', '${capitulo}')">Leer capítulo completo</span></li>`
          );
          libroCount++;
          ubicacionesPorLibro[libro].push(`${capitulo}:${versiculo}`);
        }
      });
    });
    if (libroCount > 0) {
      conteoPorLibro[libro] = libroCount;
    }
  });

  Object.entries(conteoPorLibro).forEach(([libro, count]) => {
    const ubicaciones = ubicacionesPorLibro[libro]
      .map(
        ubicacion => `<li><a href="#" onclick="showVerse('${libro}', '${ubicacion}')">${libro} ${ubicacion}</a></li>`
      )
      .join("");
    countResultsContainer.innerHTML += `<li class="expandable">${libro} (${count})<ul class="nested">${ubicaciones}</ul></li>`;
  });

  if (resultados.length > 0) {
    resultsContainer.innerHTML = resultados.join("");
  } else {
    resultsContainer.innerHTML = "<li>No se encontraron coincidencias.</li>";
  }

  // Mostrar u ocultar el sidebar según resultados
  sidebar.style.display = resultados.length > 0 ? "block" : "none";
  document.querySelectorAll(".expandable").forEach(item => {
    item.addEventListener("click", function () {
      this.querySelector(".nested").style.display =
        this.querySelector(".nested").style.display === "block" ? "none" : "block";
    });
  });
}

// Funciones auxiliares: showVerse, showFullChapter, etc. permanecen iguales


function showVerse(libro, ubicacion) {
    const [capitulo, versiculo] = ubicacion.split(":");
    fetchAllJsonData().then(datos => {
        if (!datos[libro] || !datos[libro][capitulo]) return;
        const texto = datos[libro][capitulo][versiculo];
        resultsContainer.innerHTML = texto
            ? `<li>${libro} ${capitulo}:${versiculo} - ${texto}
               <br>
               <a href="#" onclick="showFullChapter('${libro}', '${capitulo}')" class="full-chapter-link">Leer capítulo completo</a>
               </li>`
            : `<li>${libro} ${capitulo}:${versiculo} - Versículo no encontrado.</li>`;
    });
    // Ocultar botones de navegación
  prevPageButton.style.display = "none";
  nextPageButton.style.display = "none";
}




function showFullChapterWithHighlight(libro, capitulo, versiculoResaltado) {
    fetchAllJsonData().then(datos => {
        if (!datos[libro] || !datos[libro][capitulo]) return;
        const versiculos = Object.entries(datos[libro][capitulo])
            .map(([versiculo, texto]) => {
                if (versiculo === versiculoResaltado) {
                    return `<li style="background-color: #666; color: white; font-weight: bold; font-family: Arial, sans-serif; transition: background-color 0.3s ease;" 
            onmouseover="this.style.backgroundColor='#000'" 
            onmouseout="this.style.backgroundColor='#666'" 
            data-temporary="true" 
            onmouseenter="if (this.dataset.temporary === 'true') {
              setTimeout(() => { 
                this.style.backgroundColor = '#fff'; 
                this.style.color = '#333'; 
                this.style.fontWeight = 'normal'; 
                this.style.padding = '15px'; 
                this.style.border = '1px solid #ccc'; 
                this.style.marginBottom = '-13px'; 
                this.style.borderRadius = '4px'; 
                this.style.width = 'calc(100% + 80px)'; 
                this.style.marginLeft = '-90px'; 
                this.style.marginTop = '20px'; 

                // Elimina los eventos de hover
                this.removeAttribute('onmouseover');
                this.removeAttribute('onmouseout');
                this.dataset.temporary = 'false'; // Desactiva el estilo temporal
              }, 5000);
            }">
            ${libro} ${capitulo}:${versiculo} - ${texto}
        </li>`;


                }
                return `<li>${libro} ${capitulo}:${versiculo} - ${texto}</li>`;
            })
            .join("");
        resultsContainer.innerHTML = versiculos || "<li>Capítulo no encontrado.</li>";
    });
}



      searchButton.addEventListener("click", () => {
    const query = searchInput.value.trim();
    if (query) searchVerses(query);
  });

  searchInput.addEventListener("keypress", event => {
    if (event.key === "Enter") {
      const query = searchInput.value.trim();
      if (query) searchVerses(query);
    }
  });


      // Ocultar el mensaje de bienvenida al realizar una búsqueda
const welcomeMessage = document.getElementById("welcomeMessage");
function hideWelcomeMessage() {
  welcomeMessage.style.display = "none";
}
searchButton.addEventListener("click", () => {
  const query = searchInput.value.trim();
  if (query) {
    hideWelcomeMessage();
    searchVerses(query);
  }
});
searchInput.addEventListener("keypress", event => {
  if (event.key === "Enter") {
    const query = searchInput.value.trim();
    if (query) {
      hideWelcomeMessage();
      searchVerses(query);
    }
  }
});

   function displayChapter(libro, capitulo) {
    fetchAllJsonData().then(datos => {
      if (!datos[libro] || !datos[libro][capitulo]) return;
      resultsContainer.innerHTML = "";
      Object.entries(datos[libro][capitulo]).forEach(([numVerso, textoVerso]) => {
        resultsContainer.innerHTML += `<li>${libro} ${capitulo}:${numVerso} - ${textoVerso}</li>`;
      });
    });
  }

function mostrarSeccion(seccion) {
  const secciones = document.querySelectorAll(".seccionSidebar");
  secciones.forEach(sec => (sec.style.display = "none")); // Oculta todas las secciones
  const seccionSeleccionada = document.getElementById(seccion);
  if (seccionSeleccionada) {
    seccionSeleccionada.style.display = "block"; // Muestra la sección seleccionada
  }
}
function copiarContenido() {
  const resultados = document.getElementById("results");
  const texto = resultados.innerText; // Obtiene el texto de los resultados
  if (texto) {
    navigator.clipboard.writeText(texto).then(() => {
      alert("El contenido ha sido copiado.");
    }).catch(err => {
      console.error("Error al copiar.", err);
    });
  } else {
    alert("No hay contenido para copiar.");
  }
}

      // Funcionalidad del menú desplegable
      dropdownButton.addEventListener("click", () => {
        const isMenuVisible = dropdownMenu.style.display === "block";
        dropdownMenu.style.display = isMenuVisible ? "none" : "block";
      });
      document.addEventListener("click", event => {
        if (!dropdownButton.contains(event.target)) {
          dropdownMenu.style.display = "none";
        }
      });

// Función para alternar el nuevo sidebar
    </script>
   <script src="js/scriptparalelo.js"></script>



  </body>
</html>
